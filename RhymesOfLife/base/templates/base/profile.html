{% extends 'base.html' %}
{% load static i18n avatar_tags %}

{% block extra_css %}{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="card shadow-sm card-profile">
    <div class="card-body text-center">
      <img src="{% avatar_url info %}" class="rounded-circle profile-avatar mb-3" style="width:120px;height:120px;" alt="{% trans 'User avatar' %}">

      {% with fn=info.first_name ln=info.last_name ufn=user_profile.first_name uln=user_profile.last_name %}
        <h4 class="mb-1">
          {% if fn or ln %}
            {{ fn }}{% if fn and ln %} {% endif %}{{ ln }}
          {% elif ufn or uln %}
            {{ ufn }}{% if ufn and uln %} {% endif %}{{ uln }}
          {% else %}
            {{ user_profile.username }}
          {% endif %}
        </h4>
      {% endwith %}

      <div class="text-muted">@{{ user_profile.username }}</div>

      <div class="row text-start gx-3 gy-3 mt-4">
        <div class="col-12">
          <strong class="d-block mb-1">{% trans "About me" %}</strong>
          {% if info.about_me %}
            <div class="text-break">{{ info.about_me }}</div>
          {% else %}
            <div class="text-muted">{% trans "No bio yet." %}</div>
          {% endif %}
        </div>

        <div class="col-6"><strong>{% trans "Email" %}:</strong> {{ info.email|default:user_profile.email }}</div>
        <div class="col-6"><strong>{% trans "Date of birth" %}:</strong> {{ info.birth_date|date:"d.m.Y"|default:"—" }}</div>

        <div class="col-12">
          <strong class="d-block mb-1">{% trans "Syndromes" %}</strong>
          {% if info.syndromes %}
            {% for code,label in syndrome_choices %}
              {% if code in info.syndromes %}
                <span class="badge bg-secondary text-dark me-1 mb-1">{{ label }}</span>
              {% endif %}
            {% endfor %}
          {% else %}
            <span>—</span>
          {% endif %}
        </div>
      </div>

      {% if editable %}
        <div class="mt-4">
          <a href="{% url 'profile_edit' %}" class="btn btn-outline-primary">
            <i class="bi bi-pencil-fill me-1"></i> {% trans "Edit" %}
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

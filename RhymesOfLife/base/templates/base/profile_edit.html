{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/new_styles.css' %}">
<script defer src="{% static 'js/new_scripts.js' %}"></script>

<div class="container mt-4">
  <h2 class="mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>

  <form id="profile-form" method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="text-center mb-4 position-relative">
      {% if info.avatar %}
        <img id="avatar-img" src="{{ info.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä"
             class="rounded-circle shadow-sm avatar-editable" width="120" style="cursor: pointer;">
      {% else %}
        <img id="avatar-img" src="{% static 'images/default-avatar.png' %}" alt="–ê–≤–∞—Ç–∞—Ä"
             class="rounded-circle shadow-sm avatar-editable" width="120" style="cursor: pointer;">
      {% endif %}

      <input type="file" name="avatar" id="avatar-input" class="d-none">
      <input type="hidden" name="delete_avatar" id="delete-avatar" value="">

      <div id="avatar-menu" class="avatar-menu d-none">
        <button type="button" class="dropdown-item" id="change-avatar-btn">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—É—é</button>
        <button type="button" class="dropdown-item text-danger" id="delete-avatar-btn">üóë –£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">–ò–º—è</label>
      <input type="text" name="first_name" class="form-control" value="{{ info.first_name }}" required>
      <div class="invalid-feedback">–í–≤–µ–¥–∏—Ç–µ –∏–º—è</div>
    </div>

    <div class="mb-3">
      <label class="form-label">–§–∞–º–∏–ª–∏—è</label>
      <input type="text" name="last_name" class="form-control" value="{{ info.last_name }}" required>
      <div class="invalid-feedback">–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é</div>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control" value="{{ info.email }}" required>
      <div class="invalid-feedback">–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email</div>
    </div>

    <div class="mb-3">
      <label class="form-label">–°–∏–Ω–¥—Ä–æ–º</label>
      <select name="syndrome" class="form-select" required>
        {% for option in syndrome_choices %}
          <option value="{{ option }}" {% if info.syndrome == option %}selected{% endif %}>{{ option }}</option>
        {% endfor %}
      </select>
      <div class="invalid-feedback">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∏–Ω–¥—Ä–æ–º</div>
    </div>

    <div class="mb-3">
      <label class="form-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
      <input type="date" name="birth_date" class="form-control" value="{{ info.birth_date|date:'Y-m-d' }}" required>
      <div class="invalid-feedback">–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è</div>
    </div>

    <button type="submit" class="btn btn-primary mt-3">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <div class="text-success mt-3 d-none" id="form-status">‚úîÔ∏è –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω</div>
  </form>
</div>
{% endblock %}

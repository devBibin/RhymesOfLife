{% extends "base/info/info_base.html" %}
{% load static i18n %}

{% block title %}{% trans "Set new password" %} â€” {{ block.super }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/new_styles.css' %}">

<section class="section section--accent form-section">
  <div class="container">
    <div class="form-grid">
      <div class="form-card">
        <div class="form-body">
          <h2 class="mb-3 text-center">{% trans "Set new password" %}</h2>

          {% if messages %}
            {% for m in messages %}
              <div class="alert alert-{{ m.tags }} mb-3">{{ m }}</div>
            {% endfor %}
          {% endif %}

          <form method="post" novalidate>
            {% csrf_token %}
            <div class="mb-3">
              <label for="password1" class="form-label">{% trans "New password" %}</label>
              <input type="password" id="password1" name="password1" class="form-input" required autocomplete="new-password">
            </div>

            <div class="mb-2">
              <label for="password2" class="form-label">{% trans "Confirm password" %}</label>
              <input type="password" id="password2" name="password2" class="form-input" required autocomplete="new-password">
            </div>

            <div class="mb-3" style="display:flex;align-items:center;gap:.5rem;">
              <input id="showpass" type="checkbox" style="width:18px;height:18px;">
              <label for="showpass" class="form-label" style="margin:0;cursor:pointer;">{% trans "Show password" %}</label>
            </div>

            <button type="submit" class="btn form-btn">{% trans "Change password" %}</button>
          </form>

          <div class="recovery-links">
            <a href="{% url 'login' %}" class="recovery-link">{% trans "Back to sign in" %}</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
(function () {
  const cb = document.getElementById('showpass');
  const p1 = document.getElementById('password1');
  const p2 = document.getElementById('password2');
  if (cb && p1 && p2) {
    cb.addEventListener('change', function () {
      const t = this.checked ? 'text' : 'password';
      p1.type = t; p2.type = t;
    });
  }
})();
</script>
<script src="{% static 'js/auth_page.js' %}"></script>
{% endblock %}

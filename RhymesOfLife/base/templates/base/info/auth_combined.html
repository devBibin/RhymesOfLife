{% extends "base/info/info_base.html" %}
{% load static i18n %}

{% block title %}{% trans "Sign in / Sign up" %} â€” {{ block.super }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/new_styles.css' %}">

<section class="section section--accent form-section"
         id="auth-root"
         data-login-url="{% url 'login' %}"
         data-register-url="{% url 'register' %}"
         data-reset-url="{% url 'password_reset_request' %}"
         data-initial-tab="{{ initial_tab|default:'register' }}">
  <div class="container">
    <div class="form-grid">
      <div class="form-card">
        <div class="form-tabs">
          <button class="form-tab active" data-tab="register">{% trans "Sign up" %}</button>
          <button class="form-tab" data-tab="login">{% trans "Log in" %}</button>
        </div>

        <div class="form-body">
          <div id="auth-messages" aria-live="polite"></div>

          <!-- Register -->
          <form class="form-container active" id="register-form" novalidate>
            {% csrf_token %}
            <div class="mb-3">
              <label for="reg-username" class="form-label">{% trans "Username" %}</label>
              <input type="text" id="reg-username" name="username" class="form-input" required autocomplete="username">
            </div>
            <div class="mb-3">
              <label for="reg-email" class="form-label">{% trans "Email" %}</label>
              <input type="email" id="reg-email" name="email" class="form-input" required autocomplete="email">
            </div>
            <div class="mb-3">
              <label for="reg-pass1" class="form-label">{% trans "Password" %}</label>
              <input type="password" id="reg-pass1" name="password1" class="form-input" required autocomplete="new-password">
            </div>
            <div class="mb-3">
              <label for="reg-pass2" class="form-label">{% trans "Confirm password" %}</label>
              <input type="password" id="reg-pass2" name="password2" class="form-input" required autocomplete="new-password">
            </div>
            <input type="hidden" name="ajax" value="1">
            <button type="submit" class="btn form-btn">{% trans "Create account" %}</button>

            <div class="form-links">
              <a href="#" class="recovery-link" data-switch="login">{% trans "Already have an account?" %} {% trans "Log in" %}</a>
            </div>
          </form>

          <!-- Login -->
          <form class="form-container" id="login-form" novalidate>
            {% csrf_token %}
            <div class="mb-3">
              <label for="login-username" class="form-label">{% trans "Username" %}</label>
              <input type="text" id="login-username" name="username" class="form-input" required autocomplete="username">
            </div>
            <div class="mb-3">
              <label for="login-password" class="form-label">{% trans "Password" %}</label>
              <input type="password" id="login-password" name="password" class="form-input" required autocomplete="current-password">
            </div>
            <input type="hidden" name="ajax" value="1">
            <button type="submit" class="btn form-btn">{% trans "Log in" %}</button>

            <div class="form-links">
              <a class="forgot-password" href="{% url 'password_reset_request' %}">{% trans "Forgot password?" %}</a>
              <div class="mt-3">
                <a href="#" class="recovery-link" data-switch="register">{% trans "Don't have an account?" %} {% trans "Sign up" %}</a>
              </div>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</section>

<script src="{% static 'js/auth_ajax.js' %}"></script>
{% endblock %}
